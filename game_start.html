<!DOCTYPE html>
<html>
<head>
<title>Game</title>

<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    
<script src="js/jquery-3.1.0.min.js"></script>
<script src="js/bootstrap.js"></script>
<link href="css/bootstrap.css" rel="stylesheet" />
<!--<script type="text/javascript" src="js/Insomnia.js"></script>-->

<script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);
    var watchid;

    var posX, posY, can, c, player;

    function onDeviceReady() {
        posX = 0;
        posY = 200;
        can = document.getElementById("cans");
        c = can.getContext("2d");
        player = new Circle(posX, posY, 10, 0, Math.PI * 2, false);
        watchid = navigator.accelerometer.watchAcceleration(onSuccess, onError, { frequency: 500 });
        console.log("inside");
    }

    function onSuccess(acceleration) {
        console.log("inside");

        setInterval(function () {

            player.x -= acceleration.x;

            player.y += acceleration.y;

            c.fillStyle = "black"; //"rgba(0, 0, 0, 0.05)";
            c.fillRect(0, 0, can.width, can.height);


        }, 5);
    }

    function onError() {
        alert('onError!');
    }

    function stop() {
        if (watchid) {
            navigator.accelerometer.clearWatch(watchid);
            watchid = null;
        }
    }

    var Circle = function (x, y, r, s, e, b)
    {
        this.x = x;
        this.y = y;
        this.r = r;
        this.s = s;
        this.e = e;
        this.b = b;

        c.fillStyle = "white";
        c.beginPath();
        c.arc(this.x, this.y, this.r, this.s, this.e, this.b);
        c.fill();
    }

</script>

</head>
<body>

<canvas id="cans" width="360" height="640">
    Your device does not support this game!
</canvas>

</body>
</html>
