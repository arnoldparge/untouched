<!DOCTYPE html>
<html>
<head>
    <title>Game</title>

    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>

    <script src="js/jquery-3.1.0.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" />
    <!--<script type="text/javascript" src="js/Insomnia.js"></script>-->

    <script type="text/javascript" charset="utf-8">

        document.addEventListener("deviceready", onDeviceReady, false);
        var watchid;

        var posX, posY,
        innerRadius = 0,
        outerRadius = 40;

        function onDeviceReady() {
            posX = 180;
            posY = 320;
            watchid = navigator.accelerometer.watchAcceleration(onSuccess, onError, { frequency: 1 });
            console.log("inside");
        }

        function onSuccess(acceleration) {
            console.log("inside");
            var can = document.getElementById("cans"),
                c = can.getContext("2d");

            check_borders(acceleration);

            c.fillStyle = "white"; 
            c.fillRect(0, 0, can.width, can.height);

            var gradient = c.createRadialGradient(posX - 5, posY - 5, innerRadius, posX - 5, posY - 5, outerRadius);
            gradient.addColorStop(0, 'gray');
            gradient.addColorStop(1, 'black');

            //c.fillStyle = "black";
            c.beginPath();
            c.arc(posX, posY, 20, 0, Math.PI * 2, false);

            c.fillStyle = gradient;
            c.fill();
        }

        function check_borders(acceleration)
        {
            if ((posX - 20) < 0)
                posX = 20;
            else if ((posY - 20) < 0)
                posY = 20;
            else if ((posX + 20) > 360)
                posX = 340;
            else if ((posY + 20) > 640)
                posY = 620;
            else {
                posX -= acceleration.x;
                posY += acceleration.y;
            }
        }

        function onError() {
            alert('onError!');
        }

        function stop() {
            if (watchid) {
                navigator.accelerometer.clearWatch(watchid);
                watchid = null;
            }
        }

    </script>

</head>
<body>

    <canvas id="cans" width="360" height="640">Your device does not support this game!
    </canvas>

</body>
</html>
